<!DOCTYPE html>  
<html lang="en">  
<head>  
  <meta charset="UTF-8">  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">  
  <title>School Inventory System</title>  
  <style>  
    * { box-sizing: border-box; font-family: "Poppins", sans-serif; }  
    body { margin: 0; background: #f5f6fa; color: #2d3436; overflow-x: hidden; }  
    h1, h2 { text-align: center; color: #2d3436; }  
  
    /* ===== LOGIN ===== */  
    .login-container {  
      display: flex; flex-direction: column; align-items: center; justify-content: center;  
      height: 100vh; background: linear-gradient(135deg, #74b9ff, #a29bfe); padding: 20px;  
    }  
    .login-box {  
      background: white; width: 100%; max-width: 320px; padding: 25px; border-radius: 20px;  
      box-shadow: 0 5px 15px rgba(0,0,0,0.2); text-align: center;  
    }  
    .login-box input, .login-box button {  
      width: 100%; padding: 12px; margin: 10px 0; border-radius: 12px; border: 1px solid #ccc;  
      font-size: 16px;  
    }  
    .login-box button {  
      background: #0984e3; color: white; border: none; font-weight: bold; cursor: pointer;  
    }  
    .login-box button:hover { background: #74b9ff; }  
    .switch-mode {  
      font-size: 14px; color: #0984e3; margin-top: 10px; cursor: pointer; text-decoration: underline;  
    }  
  
    /* ===== INVENTORY PAGE ===== */  
    .inventory-page { display: none; padding: 10px; }  
    header {  
      background: #0984e3; color: white; text-align: center;  
      padding: 12px 16px; border-radius: 0 0 15px 15px;  
    }  
    header h1 { font-size: 1.2em; margin: 0; }  
  
    form { display: flex; flex-direction: column; gap: 10px; margin-top: 20px;  
      padding: 10px; background: white; border-radius: 15px; box-shadow: 0 3px 10px rgba(0,0,0,0.1); }  
    form input, form select, form button {  
      padding: 10px; border-radius: 10px; border: 1px solid #ccc; font-size: 14px;  
    }  
    form button { background: #00b894; color: white; font-weight: bold; }  
    form button:hover { background: #55efc4; }  
  
    .search-container { text-align: center; margin: 20px 0; }  
    #searchBar {  
      width: 90%; max-width: 400px; padding: 12px; border-radius: 10px; border: 1px solid #ccc; font-size: 16px;  
    }  
  
    table { width: 100%; border-collapse: collapse; background: white; border-radius: 10px; overflow: hidden; font-size: 14px; }  
    th, td { padding: 10px; text-align: center; border-bottom: 1px solid #ddd; word-wrap: break-word; }  
    th { background: #74b9ff; color: white; }  
    button.action-btn { padding: 6px 10px; border: none; border-radius: 8px; color: white; cursor: pointer; margin: 2px; font-size: 13px; }  
    .delete-btn { background: #d63031; }  
    .borrow-btn { background: #00b894; }  
    .return-btn { background: #00cec9; }  
    .return-btn:hover { background: #55efc4; }  
  
    .summary, .borrowed-container {  
      background: white; padding: 15px; border-radius: 10px; margin-top: 15px; font-size: 14px;  
    }  
  
    ul { padding-left: 20px; }  
  
    /* ===== LOGOUT BUTTON (BOTTOM) ===== */  
    .logout-container {  
      text-align: center;  
      margin: 20px 0 40px;  
    }  
    #logoutBtn {  
      background: #d63031;  
      border: none;  
      color: white;  
      padding: 10px 20px;  
      border-radius: 10px;  
      font-size: 16px;  
      cursor: pointer;  
      font-weight: bold;  
    }  
    #logoutBtn:hover { background: #e17055; }  
  
    #toast {  
      position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%);  
      background: rgba(0,0,0,0.85); color: white; padding: 12px 20px;  
      border-radius: 25px; font-size: 15px; opacity: 0; transition: opacity 0.5s ease;  
      z-index: 9999; text-align: center;  
    }  
    #toast.show { opacity: 1; }  
  
    @media (max-width: 600px) {  
      th, td { font-size: 12px; padding: 8px; }  
      header h1 { font-size: 1em; }  
      #logoutBtn { font-size: 14px; padding: 8px 15px; }  
    }  
  </style>  
</head>  
<body>  
  
  <!-- ===== LOGIN PAGE ===== -->  
  <div class="login-container" id="loginPage">  
    <div class="login-box">  
      <h1 id="loginTitle">üîê Enter Username & Password</h1>  
      <input type="text" id="username" placeholder="Username" required>  
      <input type="password" id="password" placeholder="Password" required>  
      <button id="loginBtn">Login</button>  
      <div class="switch-mode" id="switchMode">Create New Account</div>  
    </div>  
  </div>  
  
  <!-- ===== INVENTORY PAGE ===== -->  
  <div class="inventory-page" id="inventoryPage">  
    <header>  
      <h1>üè´ School Laboratory Inventory Management System</h1>  
    </header>  
  
    <form id="equipmentForm">  
      <input type="text" id="name" placeholder="Equipment Name" required>  
      <select id="category" required>  
        <option value="">Select Category</option>  
        <option value="Electronics">Electronics</option>  
        <option value="Glassware">Glassware</option>  
        <option value="Chemical">Chemical</option>  
        <option value="Tools">Tools</option>  
      </select>  
      <input type="number" id="quantity" placeholder="Quantity" required>  
      <select id="condition_status" required>  
        <option value="">Condition</option>  
        <option value="Good Condition">Good Condition</option>  
        <option value="Slightly Damaged">Slightly Damaged</option>  
        <option value="Damaged">Damaged</option>  
      </select>  
      <button type="submit">Add Equipment</button>  
    </form>  
  
    <div class="search-container">  
      <input type="text" id="searchBar" placeholder="üîç Search equipment...">  
    </div>  
  
    <table id="equipmentTable">  
      <thead>  
        <tr>  
          <th>ID</th>  
          <th>Name</th>  
          <th>Category</th>  
          <th>Qty</th>  
          <th>Condition</th>  
          <th>Date</th>  
          <th>Action</th>  
        </tr>  
      </thead>  
      <tbody></tbody>  
    </table>  
  
    <div class="summary">  
      <h2>üìä Equipment Summary</h2>  
      <ul id="summaryList"></ul>  
    </div>  
  
    <div class="borrowed-container">  
      <h2>üì¶ Borrowed Equipment</h2>  
      <ul id="borrowedList"></ul>  
    </div>  
  
    <!-- ===== LOGOUT BUTTON AT BOTTOM ===== -->  
    <div class="logout-container">  
      <button id="logoutBtn">Logout</button>  
    </div>  
  </div>  
  
  <div id="toast"></div>  
  
  <script>  
    const loginPage = document.getElementById("loginPage");  
    const inventoryPage = document.getElementById("inventoryPage");  
    const loginTitle = document.getElementById("loginTitle");  
    const loginBtn = document.getElementById("loginBtn");  
    const switchMode = document.getElementById("switchMode");  
    const toast = document.getElementById("toast");  
  
    function showToast(msg) {  
      toast.textContent = msg;  
      toast.className = "show";  
      setTimeout(() => { toast.className = toast.className.replace("show", ""); }, 2500);  
    }  
  
    let credentials = JSON.parse(localStorage.getItem("credentials")) || null;  
    let createMode = !credentials;  
  
    function updateLoginUI() {  
      if (createMode) {  
        loginTitle.textContent = "üîê Create Username & Password";  
        loginBtn.textContent = "Create";  
        switchMode.textContent = "Already have an account? Login";  
      } else {  
        loginTitle.textContent = "üîê Enter Username & Password";  
        loginBtn.textContent = "Login";  
        switchMode.textContent = "Create New Account";  
      }  
    }  
    updateLoginUI();  
  
    switchMode.addEventListener("click", () => {  
      createMode = !createMode;  
      updateLoginUI();  
    });  
  
    loginBtn.addEventListener("click", () => {  
      const user = document.getElementById("username").value.trim();  
      const pass = document.getElementById("password").value.trim();  
  
      if (!user || !pass) return showToast("‚ö†Ô∏è Please fill all fields");  
  
      if (createMode) {  
        credentials = { username: user, password: pass };  
        localStorage.setItem("credentials", JSON.stringify(credentials));  
        showToast("‚úÖ Account Created! You can now log in.");  
        createMode = false;  
        updateLoginUI();  
        document.getElementById("username").value = "";  
        document.getElementById("password").value = "";  
      } else {  
        if (credentials && user === credentials.username && pass === credentials.password) {  
          loginPage.style.display = "none";  
          inventoryPage.style.display = "block";  
          showToast("‚úÖ Login Successful");  
        } else {  
          showToast("‚ùå Invalid Username or Password");  
        }  
      }  
    });  
  
    document.getElementById("logoutBtn").addEventListener("click", () => {  
      inventoryPage.style.display = "none";  
      loginPage.style.display = "flex";  
      document.getElementById("username").value = "";  
      document.getElementById("password").value = "";  
      showToast("üëã Logged out successfully");  
    });  
  
    // ===== INVENTORY =====  
    const tableBody = document.querySelector("#equipmentTable tbody");  
    const form = document.getElementById("equipmentForm");  
    const summaryList = document.getElementById("summaryList");  
    const borrowedList = document.getElementById("borrowedList");  
    const searchBar = document.getElementById("searchBar");  
  
    let equipment = JSON.parse(localStorage.getItem("equipmentData")) || [];  
    let borrowed = JSON.parse(localStorage.getItem("borrowedData")) || [];  
  
    function updateTable() {  
      tableBody.innerHTML = "";  
      equipment.forEach((item, index) => {  
        const row = document.createElement("tr");  
        row.innerHTML = `  
          <td>${index + 1}</td>  
          <td>${item.name}</td>  
          <td>${item.category}</td>  
          <td>${item.quantity}</td>  
          <td>${item.condition}</td>  
          <td>${item.date}</td>  
          <td>  
            <button class="action-btn borrow-btn" onclick="borrowItem(${index})">Borrow</button>  
            <button class="action-btn delete-btn" onclick="deleteItem(${index})">Delete</button>  
          </td>`;  
        tableBody.appendChild(row);  
      });  
      updateSummary();  
      updateBorrowed();  
      localStorage.setItem("equipmentData", JSON.stringify(equipment));  
    }  
  
    function updateSummary() {  
      const summary = {};  
      equipment.forEach(item => {  
        summary[item.category] = (summary[item.category] || 0) + Number(item.quantity);  
      });  
      summaryList.innerHTML = Object.entries(summary).map(([cat, qty]) =>  
        `<li><strong>${cat}</strong>: ${qty} items</li>`).join("");  
    }  
  
    function updateBorrowed() {  
      borrowedList.innerHTML = "";  
      borrowed.forEach((item, index) => {  
        const li = document.createElement("li");  
        li.innerHTML = `  
          ${item.name} (${item.category}) - ${item.date}  
          <button class="action-btn return-btn" onclick="returnItem(${index})">Return</button>  
        `;  
        borrowedList.appendChild(li);  
      });  
      localStorage.setItem("borrowedData", JSON.stringify(borrowed));  
    }  
  
    form.addEventListener("submit", e => {  
      e.preventDefault();  
      const name = document.getElementById("name").value;  
      const category = document.getElementById("category").value;  
      const quantity = document.getElementById("quantity").value;  
      const condition = document.getElementById("condition_status").value;  
      const date = new Date().toLocaleString();  
      equipment.push({ name, category, quantity, condition, date });  
      form.reset();  
      updateTable();  
      showToast("‚úÖ Equipment added!");  
    });  
  
    window.deleteItem = function(index) {  
      const item = equipment[index];  
      equipment.splice(index, 1);  
      updateTable();  
      showToast(`üóëÔ∏è Deleted: ${item.name}`);  
    }  
  
    window.borrowItem = function(index) {  
      const item = equipment[index];  
      borrowed.push({ name: item.name, category: item.category, date: new Date().toLocaleString() });  
      equipment.splice(index, 1);  
      updateTable();  
      showToast(`üì¶ Borrowed: ${item.name}`);  
    }  
  
    window.returnItem = function(index) {  
      const item = borrowed[index];  
      borrowed.splice(index, 1);  
      equipment.push({  
        name: item.name,  
        category: item.category,  
        quantity: 1,  
        condition: "Good Condition",  
        date: new Date().toLocaleString()  
      });  
      updateTable();  
      showToast(`‚úÖ Returned: ${item.name}`);  
    }  
  
    searchBar.addEventListener("keyup", e => {  
      const text = e.target.value.toLowerCase();  
      Array.from(tableBody.getElementsByTagName("tr")).forEach(row => {  
        const name = row.cells[1].textContent.toLowerCase();  
        row.style.display = name.includes(text) ? "" : "none";  
      });  
    });  
  
    updateTable();  
  </script>  
</body>  
</html>